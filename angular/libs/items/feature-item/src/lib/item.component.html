@if ($item(); as item) {
<div class="container page" id="item-container">
  <div class="text-dark">
    <div class="row bg-white p-4">
      <div class="col-6">
        <img [src]="item.image" alt="item.title" class="item-img object-fit-contain" height="500px" width="100%"
          borderRadius="6px" />
      </div>

      <div class="col-6">
        <h1 id="card-title" data-e2e-id="item-title">{{ item.title }}</h1>
        <cdt-item-meta [item]="item" (follow)="follow($event)" (unfollow)="unfollow($event)"
          (favorite)="favorite($event)" (unfavorite)="unfavorite($event)" (delete)="delete($event)"
          [canModify]="$canModify()">
        </cdt-item-meta>
        <div [innerHTML]="item.description | markdown"></div>
        @for (tag of item.tagList; track tag) {
        <span class="badge rounded-pill text-bg-secondary p-2 mx-1">
          {{ tag }}
        </span>
        }
      </div>
    </div>

    <div class="row bg-light py-4">
      @if ($isAuthenticated()) {
      <cdt-add-comment [item]="item" [data$]="data$" [structure$]="structure$" [currentUser]="$currentUser()"
        [touchedForm$]="touchedForm$" (submitComment)="submit($event)" (updateForm)="updateForm($event)">
      </cdt-add-comment>
      } @else {
      <span class="pb-4">
        <a [routerLink]="['/login']">Sign in</a> or
        <a [routerLink]="['/register']">sign up</a> to add comments on this
        item.
      </span>
      }
      @for (comment of $comments(); track comment.id) {
      <cdt-item-comment [currentUser]="$currentUser()" (delete)="deleteComment($event)" [item]="item"
        [comment]="comment"></cdt-item-comment>
      }
    </div>
  </div>
</div>
}